{"ast":null,"code":"var _jsxFileName = \"/Users/francescomelpignano/Desktop/kadena/code/allocations/src/contexts/PactContext.js\";\nimport React from 'react';\nimport Pact from 'pact-lang-api';\nconst Context = React.createContext();\nconst hosts = [\"us-e1\", \"us-e2\"];\n\nconst createAPIHost = (network, chainId) => `https://${network}.chainweb.com/chainweb/0.0/mainnet01/chain/${chainId}/pact`;\n\nexport class PactStore extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.relAll = async acct => {\n      try {\n        const signCmd = {\n          pactCode: `(coin.release-allocation ${JSON.stringify(acct)})`,\n          caps: [],\n          sender: acct,\n          gasLimit: 5000,\n          gasPrice: 0.000000001,\n          chainId: \"0\",\n          ttl: 28800,\n          envData: {}\n        };\n        const cmd = await Pact.wallet.sign(signCmd);\n        const reqKey = await Pact.wallet.sendSigned(cmd, createAPIHost(hosts[0], \"0\"));\n      } catch (err) {\n        console.log(err);\n        alert(\"you cancelled the TX or you did not have the wallet app open\");\n        window.location.reload();\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(Context.Provider, {\n      value: { ...this.state,\n        relAll: this.relAll\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\nexport default Context;","map":{"version":3,"sources":["/Users/francescomelpignano/Desktop/kadena/code/allocations/src/contexts/PactContext.js"],"names":["React","Pact","Context","createContext","hosts","createAPIHost","network","chainId","PactStore","Component","relAll","acct","signCmd","pactCode","JSON","stringify","caps","sender","gasLimit","gasPrice","ttl","envData","cmd","wallet","sign","reqKey","sendSigned","err","console","log","alert","window","location","reload","render","state","props","children"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AAEA,MAAMC,OAAO,GAAGF,KAAK,CAACG,aAAN,EAAhB;AAEA,MAAMC,KAAK,GAAG,CAAC,OAAD,EAAU,OAAV,CAAd;;AACA,MAAMC,aAAa,GAAG,CAACC,OAAD,EAAUC,OAAV,KAAuB,WAAUD,OAAQ,8CAA6CC,OAAQ,OAApH;;AAEA,OAAO,MAAMC,SAAN,SAAwBR,KAAK,CAACS,SAA9B,CAAwC;AAAA;AAAA;;AAAA,SAE7CC,MAF6C,GAEpC,MAAOC,IAAP,IAAgB;AACvB,UAAI;AACF,cAAMC,OAAO,GAAG;AACZC,UAAAA,QAAQ,EAAG,4BAA2BC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAAqB,GAD/C;AAEZK,UAAAA,IAAI,EAAE,EAFM;AAIZC,UAAAA,MAAM,EAAEN,IAJI;AAKZO,UAAAA,QAAQ,EAAE,IALE;AAMZC,UAAAA,QAAQ,EAAE,WANE;AAOZZ,UAAAA,OAAO,EAAE,GAPG;AAQZa,UAAAA,GAAG,EAAE,KARO;AASZC,UAAAA,OAAO,EAAE;AATG,SAAhB;AAWA,cAAMC,GAAG,GAAG,MAAMrB,IAAI,CAACsB,MAAL,CAAYC,IAAZ,CAAiBZ,OAAjB,CAAlB;AACA,cAAMa,MAAM,GAAG,MAAMxB,IAAI,CAACsB,MAAL,CAAYG,UAAZ,CAAuBJ,GAAvB,EAA4BjB,aAAa,CAACD,KAAK,CAAC,CAAD,CAAN,EAAW,GAAX,CAAzC,CAArB;AACD,OAdD,CAcE,OAAMuB,GAAN,EAAU;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAG,QAAAA,KAAK,CAAC,8DAAD,CAAL;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD;AACF,KAtB4C;AAAA;;AAwB7CC,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,OAAD,CAAS,QAAT;AACE,MAAA,KAAK,EAAE,EACL,GAAG,KAAKC,KADH;AAELzB,QAAAA,MAAM,EAAE,KAAKA;AAFR,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMG,KAAK0B,KAAL,CAAWC,QANd,CADF;AAUD;;AAnC4C;AAuC/C,eAAenC,OAAf","sourcesContent":["import React from 'react';\nimport Pact from 'pact-lang-api';\n\nconst Context = React.createContext();\n\nconst hosts = [\"us-e1\", \"us-e2\"]\nconst createAPIHost = (network, chainId) => `https://${network}.chainweb.com/chainweb/0.0/mainnet01/chain/${chainId}/pact`\n\nexport class PactStore extends React.Component {\n\n  relAll = async (acct) => {\n    try {\n      const signCmd = {\n          pactCode: `(coin.release-allocation ${JSON.stringify(acct)})`,\n          caps: [\n          ],\n          sender: acct,\n          gasLimit: 5000,\n          gasPrice: 0.000000001,\n          chainId: \"0\",\n          ttl: 28800,\n          envData: {}\n        }\n      const cmd = await Pact.wallet.sign(signCmd)\n      const reqKey = await Pact.wallet.sendSigned(cmd, createAPIHost(hosts[0], \"0\"))\n    } catch(err){\n      console.log(err);\n      alert(\"you cancelled the TX or you did not have the wallet app open\")\n      window.location.reload();\n    }\n  }\n\n  render() {\n    return (\n      <Context.Provider\n        value={{\n          ...this.state,\n          relAll: this.relAll\n        }}\n      >\n        {this.props.children}\n      </Context.Provider>\n    );\n  }\n\n}\n\nexport default Context;\n"]},"metadata":{},"sourceType":"module"}